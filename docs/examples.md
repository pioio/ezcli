# Usage Examples
(This page was autogenerated, do not edit manually)

Best way to learn is by example. Here are some ways of how to use `taskcli` along with the command output.

All of the examples below can also be found in the `examples/` directory of the project.

To run a specific example from the `examples/` dir yourself, do this:
```
cd examples/
t -f filename.py [optional-args]
```

Also, [go here for a cheat sheet](cheatsheet.md) -- it's a more concise version of some of the examples below.


### Basic Customize Settings
```python
"""Most basic example of a task.

Tags: basic

Run:
- taskcli -f FILENAME             # list tasks
- taskcli -f FILENAME  task1      # will call second task several time
- taskcli -f FILENAME  say-hello yeti # call it directly
"""
from taskcli import task, tt

# Here we change the default, to print a message whenever we enter a task
tt.config.print_task_start_message = True


@task
def task1():
    """This task has two positional arguments, one of them is optional."""
    print("Starting the first task", flush=True)
    say_hello("alice")
    say_hello("bob")
    say_hello("charlie")

    # But we can choose to disable it for this call, simply change it at any time
    # >  tt.config.print_task_start_message = False
    say_hello("dylan")


@task
def say_hello(name="alice"):
    """This task has one positional, and one named optional argument.

    Args after the "*" are named options only.
    """
    print(f"Hello from task2, {name=}", flush=True)
```
```console
### list tasks
~/taskcli/examples: taskcli -f basic_customize_settings.py
default               Default tasks
say-hello             This task has one positional, and one named optional argument.
task1                 This task has two positional arguments, one of them is optional.
```

```console
### will call second task several time
~/taskcli/examples: taskcli -f basic_customize_settings.py  task1
-- taskcli [task1] -------------------------------------------------------------
Starting the first task
-- taskcli [task1 > say-hello] -------------------------------------------------
Hello from task2, name='alice'
--
-- taskcli [task1 > say-hello] -------------------------------------------------
Hello from task2, name='bob'
--
-- taskcli [task1 > say-hello] -------------------------------------------------
Hello from task2, name='charlie'
--
-- taskcli [task1 > say-hello] -------------------------------------------------
Hello from task2, name='dylan'
--
--
```

```console
### call it directly
~/taskcli/examples: taskcli -f basic_customize_settings.py  say-hello yeti
-- taskcli [say-hello] ---------------------------------------------------------
Hello from task2, name='yeti'
--
```

---
### Dynamic Task Creation
```python
"""Create tasks dynamically.

And to make it interesting, each task has a different default argument.

Tags: basic

Run:
- taskcli -f FILENAME               # list tasks
- taskcli -f FILENAME  foobar-1
- taskcli -f FILENAME  foobar-5 --person-name Lex
- taskcli -f FILENAME  call-all-dynamic-foobars

"""

from taskcli import task, tt

# Different default args for each task
names = ["Alice", "Bob", "Charlie", "Dylan", "Eve", "Frank", "Grace", "Helen"]

for x in range(7):
    # To avoid name clashes, we will need to assign unique name to each task.
    task_name = f"foobar-{x}"

    person_name = names[x]

    @task(name=task_name, desc=f"Task number {x}")
    def foobar(x=x, *, person_name=person_name):  # x=x is needed to bind the loop variable (important!)
        print(f"Hello, {person_name}! ".ljust(20) + f"({x=})")


@task
def call_all_dynamic_foobars():
    """Call all the dynamically created tasks."""
    tasks = tt.get_tasks()  # returns all the tasks present in this module
    for task in tasks:
        if task.name.startswith("foobar"):
            task.func()
```
```console
### list tasks
~/taskcli/examples: taskcli -f dynamic_task_creation.py
default               Default tasks
call-all-dynamic-foobars Call all the dynamically created tasks.
foobar-0              Task number 0
foobar-1              Task number 1
foobar-2              Task number 2
foobar-3              Task number 3
foobar-4              Task number 4
foobar-5              Task number 5
foobar-6              Task number 6
```

```console
~/taskcli/examples: taskcli -f dynamic_task_creation.py  foobar-1
Hello, Bob!         (x=1)
```

```console
~/taskcli/examples: taskcli -f dynamic_task_creation.py  foobar-5 --person-name Lex
Hello, Lex!         (x=5)
```

```console
~/taskcli/examples: taskcli -f dynamic_task_creation.py  call-all-dynamic-foobars
Hello, Alice!       (x=0)
Hello, Bob!         (x=1)
Hello, Charlie!     (x=2)
Hello, Dylan!       (x=3)
Hello, Eve!         (x=4)
Hello, Frank!       (x=5)
Hello, Grace!       (x=6)
```

---
### Basic Using Arguments
```python
"""Most basic example of a task.

Tags: basic

Run:
- taskcli -f FILENAME               # list tasks
- taskcli -f FILENAME  task1  100   # task1 requires the argument
- taskcli -f FILENAME  task1  100  bruno  # task1 requires the argument
- taskcli -f FILENAME  task2        # task2 does not require any args
- taskcli -f FILENAME  task2  --name bob
- taskcli -f FILENAME  task2  --name bob 193

"""
from taskcli import task, tt

@task
def task1(age: int, name: str = "alice"):
    """This task has two positional arguments, one of them is optional."""
    # The basic types are already converted to their correct types
    assert isinstance(age, int)
    assert isinstance(name, str)
    print(f"Hello from task1: {age=} {name=}")

@task
def task2(height: int = 42, *, name: str = "alice"):
    """This task has one positional, and one named optional argument.

    The args after the "*" are named options only (i.e. --name).
    """
    print(f"Hello from task2: {height=} {name=}")
```
```console
### list tasks
~/taskcli/examples: taskcli -f basic_using_arguments.py
default               Default tasks
task1   AGE           This task has two positional arguments, one of them is optional.
task2                 This task has one positional, and one named optional argument.
```

```console
### task1 requires the argument
~/taskcli/examples: taskcli -f basic_using_arguments.py  task1  100
Hello from task1: age=100 name='alice'
```

```console
### task1 requires the argument
~/taskcli/examples: taskcli -f basic_using_arguments.py  task1  100  bruno
Hello from task1: age=100 name='bruno'
```

```console
### task2 does not require any args
~/taskcli/examples: taskcli -f basic_using_arguments.py  task2
Hello from task2: height=42 name='alice'
```

```console
~/taskcli/examples: taskcli -f basic_using_arguments.py  task2  --name bob
Hello from task2: height=42 name='bob'
```

```console
~/taskcli/examples: taskcli -f basic_using_arguments.py  task2  --name bob 193
Hello from task2: height=193 name='bob'
```

---
### Basic
```python
"""Most basic example of a task.

Tags: basic

Run:
- t -f FILENAME                 # list tasks
- tt -f FILENAME                # list tasks, including hidden ones
- t -f FILENAME hello           # run the hello taask
- t -f FILENAME hello-hidden    # run the hidden task

"""
from taskcli import task, tt


@task
def hello():
    """This line will become the summary for the task list output."""
    print("Hello, World!")


@task(hidden=True)
def hello_hidden():
    """This task is hidden by default.

    You can run it with `t`, even though it's not shown in the task list by default.
    """
    print("Hello from the hidden task!")
```
```console
### list tasks
~/taskcli/examples: t -f basic.py
default               Default tasks
hello                 This line will become the summary for the task list output.
1 hidden
```

```console
### list tasks, including hidden ones
~/taskcli/examples: tt -f basic.py
default               Default tasks
hello                 This line will become the summary for the task list output.
hello-hidden          This task is hidden by default.
```

```console
### run the hello taask
~/taskcli/examples: t -f basic.py hello
Hello, World!
```

```console
### run the hidden task
~/taskcli/examples: t -f basic.py hello-hidden
Hello from the hidden task!
```

---
